UML weblarek - `https://app.creately.com/d/wuI36UfhiGi/edit`

# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Подход разработки
В проекте используется событийно-ориентированный подход. Взаимодействие между различными компонентами приложения осуществляется через обмен сообщениями, вызванными событиями. 

В проекте используется модель MVP (Model-View-Presenter), которая разделяет приложение на три основных компонента: модель, отображение и презентёр. Модель отвечает за работу с данными и бизнес-логикой, отображение представляет собой интерфейс пользователя, а презентёр связывает модель данных и отображение, обрабатывая события и передавая данные между ними. 

## Базовый код
### Класс `Model`
Абстрактный класс дженерик, обощающий в себе конструктор и метод привязки события. 
Класс является дженериком и принимает в переменной `<T>` тип данных модели. 
Конструктор, принимая на вход объект данных и объект события типа IEvent, объединяет входящий объект с родительским
Метод `emmitChanges` выдает сообщение об изменении данных — регистрирует входящее событие в `EventEmitter`

### Класс `Component`
Абстрактный класс дженерик, содержащий общий конструктор и методы работы с компонентами отображения. 
Класс является дженериком и принимает в переменной `<T>` тип данных компонента отображения. 
Конструктор принимает на вход `container` типа `HTMLElement`.
Методы:
`toggleClass` — метод переключения класса элемента
`setDisabled` — метод блокировки кнопки
`setText` — метод установки текста элемента
`setImage` — метод установки изображения элемента и его alt
`render` — метод слияния входящих данных и отрисовки элемента

### Класс `EventEmitter`
Класс EventEmitter обеспечивает работу событий. 
Устанавливает и снимает слушателей событий, вызвает слушателей при возникновении события.

### Класс `Api`
Хранит основные поля и методы, необходимые при работе с сервером.
Получает и хранит базовый url (baseUrl) и опции запроса (options).
Методы позволяют обработать запрос, отправить и получить данные.

## Компоненты модели данных (Model)
### Класс `ShopApi`
Основной класс работы с сервером в проекте. Расширяется базовым классом `Api `.
Конструктор:
принимает и передает в родительский конструктор `Api` поля `baseUrl` и `options`;
принимает и сохраняет входящий url запроса в cdn.
Поле `cdn` — хранит входящий url
Методы:
`getProductList` — метод получения списка товаров с сервера
`orderProducts` — метод отправки данных заказа на сервер

### Класс `AppState`
Является моделью данных приложения. Данный класс содержит в себе все основные данные страницы и методы работы с этими данными. 
Тут распределяются данные по частям приложения: каталог, превью, корзина, форма заказа. 
Расширяется базовым абстрактным классом `Model` по интерфейсу `IAppState`. 
``` type/index.ts ```

### Класс `Product`
Модель хранящая данные товара полученные с сервера.
Расширяется базовым абстрактным классом `Model<T>` по интерфейсу `IProductItem`.
``` type/index.ts ```


## Компоненты представления (View)
### Класс `Card`
Отвечает за отображение данных карточки товара. 
Поля отвечают за связь с разметкой, методы за наполнение разметки данными. 
Расширяется базовым абстрактным классом `Component<T>` по интерфейсу  `ICard`
```tsx
interface ICard {
  title: string;
  image: string;
  description: string;
  button: string;
  category: string;
  price: string;
}
```

### Класс `Page`
Отвечает за отображение страницы и ее основных элементов. 
Поля отвечают за связь с разметкой, методы за наполнение разметки данными, закрытие/открытие для листинга страницы при открытии/закрытии модального окна. 
Расширяется базовым абстрактным классом `Component<T>` по интерфейсу  `IPage`
```tsx
interface IPage {
  counter: number;
  catalog: HTMLElement[];
  locked: boolean;
}
```

### Класс `Modal`
Отвечает за отображение модального окна. 
Имеет поля и методы, которые связаны с закрытием и открытием окна, а также наполнение его нужным контентом. 
Расширяется базовым абстрактным классом `Component<T>` по интерфейсу  `IModalData`
```tsx
interface IModalData {
    content: HTMLElement;
}
```

### Класс `Order`
Отвечает за отображение заказа в модальном окне. 
Расширяется базовым абстрактным классом `Component<T>` по интерфейсу  `IOrderForm`
``` type/index.ts ```

### Класс `Form`
Отвечает за отображение формы и ее валидацию.
Класс является дженериком и принимает в переменной `<T>` тип данных компонента отображения. 
Расширяется базовым абстрактным классом `Component<T>` по интерфейсу  `IFormState`
```tsx
interface IFormState {
    valid: boolean;
    errors: string[];
}
```

### Класс `Success`
Отвечает за отображение успешного оформления заказа в модальном окне.
Расширяется базовым абстрактным классом `Component<T>` по интерфейсу  `ISuccess`
```tsx
interface ISuccess {
    total: number;
}
```

### Класс `Basket`
Отвечает за отображение корзины в модальном окне. Удаляет позицию товара из корзины. 
Расширяется базовым абстрактным классом `Component<T>` по интерфейсу  `IBasket`
```tsx
interface IBasket {
    items: HTMLElement[];
    total: number;
}
